<!DOCTYPE html>
<html lang="zh-CN ">
<!-- Head Start -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="kavience 的博客, 专注于前端开发, web开发, 编程技术-Web前端优化总结">
    <meta name="keyword"  content="kavience,javascript,前端开发,php,react,kavience博客,Web前端优化总结">
    <link rel="shortcut icon" href="/img/avatar/my-avatar.jpg">
    <title>
        
          Web前端优化总结 - kavience | Blog
        
    </title>
    <link rel="canonical" href="http://www.kavience.com/frontend/summary-of-web-frontend-optimization.html">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/bootstrap.min.css">

    
<link rel="stylesheet" href="/css/omega.css">

    
<link rel="stylesheet" href="/css/highlight.css">

    
<link rel="stylesheet" href="/css/gitalk.min.css">

    
<link rel="stylesheet" href="/css/kkpager_orange.min.css">


    
<script src="/js/jquery.min.js"></script>

    
<script src="/js/bootstrap.min.js"></script>

    
<script src="/js/gitalk.min.js"></script>

    
<script src="/js/kkpager.min.js"></script>

    
<script src="/js/button.min.js"></script>

    
<script src="/js/fastclick.min.js"></script>

    
<script src="/js/omega.js"></script>

<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/feed.xml" title="Kavience" type="application/atom+xml">
</head>

<!-- Head End -->
<body ontouchstart="">
    <!-- Header Start -->
     
        <style type="text/css">
    header.intro-header {
        
            background-image: url('/img/header_img/article-bg.jpg')
        
    }
</style>
<header id="intro-header" class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                            <a class="tag" href="/tags/JavaScript" title="JavaScript">JavaScript</a>
                            
                            <a class="tag" href="/tags/优化" title="优化">优化</a>
                            
                        </div>
                        <h1>Web前端优化总结</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Kavience on
                            2020-08-04
                        </span>
                    </div>
                
            </div>
        </div>
    </div>
</header>

     
    <!-- Header End -->

    <!-- Nav Start -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Kavience</a>
    </div>

    <div id="blog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="#" id="search" ><img style="width: 16px;height: 16px;margin: -2px 5px 0px 0;" src="/icons/search.svg " alt="">搜索 </a>
          </li>
          <li>
            <a href="/">首页 </a>
          </li>
           

           
             
           
            
              <li>
                <a href="/categories/">分类</a>
              </li>
             
           
            
              <li>
                <a href="/tags/">标签</a>
              </li>
             
           
            
              <li>
                <a href="/archive/">归档</a>
              </li>
             
           
            
              <li>
                <a href="/about/">关于</a>
              </li>
             
          
        </ul>
      </div>
    </div>
  </div>
</nav>

<!-- Search Modal -->
<div class="modal search-modal">
  <div class="search-container">
    <div class="search-container-top">
      <img src="/icons/close.svg" alt="">
    </div>
    <input class="search-container-input" placeholder="输入关键字搜索 " type="text">
    <div class="search-container-content"></div>
  </div>
</div>

<script>
  $('.search-container').css({ "height": window.innerHeight, "overflow": 'hidden' })
  $('.search-container-content').css({ "height": window.innerHeight - 70, "overflow": 'scroll' })
  var allArticles = [];
  var xReq = new XMLHttpRequest();
  xReq.open('GET', '/search.json');
  xReq.send();
  xReq.onreadystatechange = function(){
    if(xReq.readyState === 4 && xReq.status === 200){
      allArticles = JSON.parse(xReq.responseText);
    }
  }

  $('#search').on('click', function() {
    document.body.style['overflow-y'] = 'hidden'
    $('.search-modal').addClass('modal-show');
  });
  
  $('.search-modal,.search-container-top img').on('click', function() {
    document.body.style['overflow-y'] = 'scroll';
    $('.search-modal').removeClass('modal-show');
  });
  
  $('.search-container').on('click', function(e) {
    e.stopPropagation();
  });
  
  $('.search-container-input').bind('input propertychange', function(e) {
    var searchValue = e.currentTarget.value;
    var correctArticles = allArticles.filter(article => article.content.toLowerCase().indexOf(searchValue.toLowerCase()) > -1 || article.title.toLowerCase().indexOf(searchValue.toLowerCase()) > -1)
    var articleListHtml = '';
    for (let index = 0; index < correctArticles.length; index++) {
      var article = correctArticles[index];
      article.description = article.content.replace(/<[^>]+>/g,"");
      var title = article.title, description = '';
      var searchReg = RegExp(searchValue, 'i');
      var searchRegGlobal = RegExp(searchValue, 'ig');
      if (article.title.match(searchReg)) {
        title = article.title.replaceAll(searchRegGlobal, `<span class="search-value-active">${searchValue}</span>`);
      }
      var contentMatch = article.description.match(searchReg);
      if (contentMatch) {
        description = `...${article.description.substr(contentMatch['index'], 210)}...`.replaceAll(searchRegGlobal, `<span class="search-value-active">${searchValue}</span>`);
      } else {
        description = article.description.substr(0, 200);
      }

      articleListHtml += `<div class="search-container-content_item">
        <a href="${article.url}" class="search-container-content_item-title">${title}</a>
        <div class="search-container-content_item-description">${description}</div>
      </div>`
    }

    $('.search-container-content').html(articleListHtml);
  });
  
</script>
<script>
  var $body = document.body;
  var $toggle = document.querySelector(".navbar-toggle");
  var $navbar = document.querySelector("#blog_navbar");
  var $collapse = document.querySelector(".navbar-collapse");

  $toggle.addEventListener("click", handleMagic);
  function handleMagic(e) {
    if ($navbar.className.indexOf("in") > 0) {
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function () {
        // prevent frequently toggle
        if ($navbar.className.indexOf("in") < 0) {
          $collapse.style.height = "0px";
        }
      }, 400);
    } else {
      $collapse.style.height = "auto";
      $navbar.className += " in";
    }
  }
</script>

    <!-- Nav End -->

    <!-- Main Content Start -->
    <div class="main-content content-post ">
        
<!-- Post Content Start -->
<article>
    <div class="container" style="overflow: hidden">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container post-markdown-body
            ">
                <h2 id="what">What</h2>
<p>针对 web 前端优化方案的总结, 主要技术栈为 React。</p>
<h2 id="why">Why</h2>
<p>与以往 PHP, JSP 等服务端渲染不同, 现如今大多数 web 端采用 React, Vue, Angular 等客户端渲染方案。单页应用带来的好处是显而易见的, 前端开发人员可以专注于前端页面的交互, 后端人员专注于数据的处理, 分工明确。另一方面得益于 nodejs 的生态, 例如 npm 包管理, webpack, gulp 打包等, 前端开发人员可以避免重复造轮子, 开发也变得越来越迅速。然而单页应用也带来另一个问题, 随着引入的库越来越多, 项目也越来越臃肿, 页面加载速度奇慢无比, 本文主要讨论针对 webpack 手动搭建的 React 项目为例做优化。</p>
<h2 id="how">How</h2>
<p>首先简单罗列一下 web 开发中可以优化的点有哪些:</p>
<ul>
<li>引入 CDN 资源, 图片、视频等大文件资源也可以通过 oss 等其它方式引入;</li>
<li>图片、icon 等使用 SVG;</li>
<li>样式优化( style-loader, mini css );</li>
<li>代码优化(减少 re-render 次数);</li>
<li>文件开启 GZip 压缩( Nodejs, Nginx );</li>
<li>代码拆分( webpack DllPlugin, webpack splitChunks, React.lazy );</li>
<li>客户端缓存( Cache-Control )。</li>
</ul>
<p>下面依次讲解。</p>
<h3 id="cdn-资源引入">CDN 资源引入</h3>
<p>这是最简单粗暴的, 打包后的资源文件, 如果不做任何优化, 大部分项目中压缩后的 vender.xxx.js 文件, 大概会有 5-8 M,在国内采用 CDN 加载, 时间大概 1 - 2 s 左右, 在次基础上, 还可以进行 GZip 压缩, 以 <a href="https://help.aliyun.com/knowledge_detail/39645.html" target="_blank" rel="noopener">阿里 oss</a> 为例子, 采用 GZip 压缩后的资源, 大小会差不多减少三分之二, 访问时间会在 1 秒左右, 如果对项目访问速度要求不高, 这完全足够了。</p>
<p>另外, 例如图片、视频、音频等大文件, 肯定是要采用 CDN 的, 可能还要引入流的概念, 这里就不累述了(关键我也不熟悉)。</p>
<h3 id="图片-icon-等使用-svg">图片、icon 等使用 SVG</h3>
<p>SVG 的优势(来源谷歌):</p>
<ul>
<li>SVG 图像可通过文本编辑器来创建和修改；</li>
<li>SVG 图像可被搜索、索引、脚本化或压缩；</li>
<li>SVG 是可伸缩的；</li>
<li>SVG 图像可在任何的分辨率下被高质量地打印；</li>
<li>SVG 可在图像质量不下降的情况下被放大；</li>
</ul>
<p>另外还有些个人认为的优势, SVG 可以做动画, 可以嵌入 HTML 文件, 减少 HTTP 请求。</p>
<h3 id="样式优化-style-loader-mini-css">样式优化( style-loader, mini css )</h3>
<p>针对样式, 大部分项目中会使用 less,sass 或者 stylus, 通过 <code>less-loader</code>, <code>sass-loader</code> 等各种 loader, 最后基本有两种方案, 一是通过 <code>css-loader</code> 和 <code>style-loader</code> 把生成后的样式嵌入 HTML, 作为 style 标签引入, 另一种是通过 <code>css-loader</code> 和 <code>miniCssExtractPlugin</code> 生成压缩后的 css 引入。两种方式我觉得都没什么问题, 差不多, 但我更喜欢后者。嵌入到 HTML 可以减少 HTTP 请求, 但是压缩后的样式再经过 GZip 压缩其实也就几十毫秒左右。</p>
<h3 id="代码优化-减少-re-render-次数">代码优化(减少 re-render 次数)</h3>
<p>代码优化根据项目采用的框架不同, 优化方案也不同, 但万变不离其宗, 主要是减少重渲染次数。</p>
<p>以 React 为例, 减少 <code>componentWillReceiveProps</code> , 使用 hooks 等, 注意 state 的值, 注意什么时候该用 props, 什么时候该用 state。props 和 state 的改变都会引起 re-render , 我的总结就是: 「 在组件中, 这个值会经常改变, 再<code>考虑</code>把这个值设为 state 。」 其实也不一定准确, 还是得看具体情况, 比如, <code>editable</code>, <code>visible</code> 等这类表示某些状态的, 大多数时候都作为 state, 但也有例外, 比如 <code>loading</code>, 业务不一样, 可能在会引入 <code>redux</code> 全局状态, 在发生 HTTP 请求的时候, 设置 <code>loading</code> 为 true, 组件可以从全局去拿这个状态值。</p>
<h3 id="文件开启-gzip-压缩-nodejs-nginx-等">文件开启 GZip 压缩( Nodejs, Nginx 等 )</h3>
<p>GZip 在上述方案中多次提到, 如果你不想使用 CDN, 就想部署在自己的服务器中, 开启 GZip 根据不同的 web 容器, 设置的方式也不一样, 但总体思路差不多。</p>
<p>先说 nodejs , 基于 nodejs 的 <a href="https://nodejs.org/docs/latest-v12.x/api/zlib.html#zlib_class_zlib_gzip" target="_blank" rel="noopener">GZip</a> , 根据不同的 nodejs 框架有不同的使用方案, 我使用的是 koa, 引入的是 <code>koa-compress</code>, 使用方式如下:</p>
<pre><code class="highlight js">...
<span class="keyword">const</span> compress = <span class="built_in">require</span>(<span class="string">"koa-compress"</span>);
<span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">"koa"</span>);
<span class="keyword">const</span> server = <span class="keyword">new</span> Koa();
server.use(
  compress(&#123;
    threshold: <span class="number">1024</span>,
    gzip: &#123;
      flush: <span class="built_in">require</span>(<span class="string">"zlib"</span>).Z_SYNC_FLUSH,
    &#125;,
    deflate: &#123;
      flush: <span class="built_in">require</span>(<span class="string">"zlib"</span>).Z_SYNC_FLUSH,
    &#125;,
    br: <span class="literal">false</span>,
  &#125;)
);
...</code></pre>
<p>Nginx, Apache 等 web 容器, 编辑 conf 文件即可, 以 Nginx 为例:</p>
<pre><code class="highlight bash">...
<span class="comment"># 开启gzip</span>
gzip on;
<span class="comment"># 启用gzip压缩的最小文件, 小于设置值的文件将不会压缩</span>
gzip_min_length 1k;
<span class="comment"># gzip 压缩级别, 1-9, 数字越大压缩的越好, 也越占用CPU时间, 后面会有详细说明</span>
gzip_comp_level 1;
<span class="comment"># 进行压缩的文件类型。javascript有多种形式。其中的值可以在 mime.types 文件中找到。</span>
gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/vnd.ms-fontobject font/ttf font/opentype font/x-woff image/svg+xml;
<span class="comment"># 是否在http header中添加Vary: Accept-Encoding, 建议开启</span>
gzip_vary on;
<span class="comment"># 禁用IE 6 gzip</span>
gzip_disable <span class="string">"MSIE [1-6]\."</span>;
<span class="comment"># 设置压缩所需要的缓冲区大小</span>
gzip_buffers 32 4k;
<span class="comment"># 设置gzip压缩针对的HTTP协议版本, 没做负载的可以不用</span>
<span class="comment"># gzip_http_version 1.0;</span>
...</code></pre>
<p>Apache 类似。</p>
<h3 id="代码拆分-webpack-dllplugin-webpack-splitchunks-react-lazy">代码拆分( webpack DllPlugin, webpack splitChunks, React.lazy )</h3>
<h4 id="webpack-dllplugin">webpack DllPlugin</h4>
<p>使用 <code>webpack.DllPlugin</code> , 可以把常用的且基本不变的库, 单独拆分出去, 且仅需 build 一次, 可以提升打包的速度。</p>
<pre><code class="highlight js"><span class="comment">// webpack.dll.config.js</span>
<span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);
<span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);
<span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">"copy-webpack-plugin"</span>);

<span class="built_in">module</span>.exports = &#123;
  entry: &#123;
    react: [<span class="string">"react"</span>, <span class="string">"react-dom"</span>],
  &#125;,
  mode: <span class="string">"production"</span>,
  output: &#123;
    filename: <span class="string">"[name].dll.[hash:6].js"</span>,
    path: path.resolve(__dirname, <span class="string">"dist"</span>, <span class="string">"dll"</span>),
    library: <span class="string">"[name]_dll"</span>,
  &#125;,
  plugins: [
    <span class="keyword">new</span> webpack.DllPlugin(&#123;
      name: <span class="string">"[name]_dll"</span>,
      path: path.resolve(__dirname, <span class="string">"dist"</span>, <span class="string">"dll"</span>, <span class="string">"manifest.json"</span>),
    &#125;),
  ],
&#125;;</code></pre>
<p>在项目中使用:</p>
<pre><code class="highlight js"><span class="comment">// webpack.config.js</span>
...
<span class="keyword">new</span> webpack.DllReferencePlugin(&#123;
      manifest: path.resolve(__dirname, <span class="string">'dist'</span>, <span class="string">'dll'</span>, <span class="string">'manifest.json'</span>),
    &#125;),
<span class="keyword">new</span> CleanWebpackPlugin(&#123;
    cleanOnceBeforeBuildPatterns: [<span class="string">'**/*'</span>, <span class="string">'!dll'</span>, <span class="string">'!dll/**'</span>, <span class="string">'!pdfjs'</span>, <span class="string">'!pdfjs/**'</span>],
&#125;),
...</code></pre>
<blockquote>
<p>第一次使用 webpack.dll.config.js 文件会对第三方库打包, 打包完成后就不会再打包它了, 然后每次运行 webpack.config.js 文件的时候, 都会打包项目中本身的文件代码, 当需要使用第三方依赖的时候, 会使用 DllReferencePlugin 插件去读取第三方依赖库。所以说它的打包速度会得到一个很大的提升。</p>
</blockquote>
<h4 id="webpack-splitchunks">webpack splitChunks</h4>
<p>通过 splitChunks, 会把这些库再单独拆分出去</p>
<pre><code class="highlight js"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">"webpack-merge"</span>);
<span class="keyword">const</span> baseConfig = <span class="built_in">require</span>(<span class="string">"./webpack.config.js"</span>);
<span class="keyword">const</span> opimizeCss = <span class="built_in">require</span>(<span class="string">"optimize-css-assets-webpack-plugin"</span>);
<span class="keyword">const</span> TerserPlugin = <span class="built_in">require</span>(<span class="string">"terser-webpack-plugin"</span>);
<span class="comment">// 打包后文件大小分析</span>
<span class="keyword">const</span> BundleAnalyzerPlugin = <span class="built_in">require</span>(<span class="string">"webpack-bundle-analyzer"</span>)
  .BundleAnalyzerPlugin;

<span class="built_in">module</span>.exports = merge(baseConfig, &#123;
  mode: <span class="string">"production"</span>,
  optimization: &#123;
    runtimeChunk: &#123;
      name: <span class="string">"manifest"</span>,
    &#125;,
    splitChunks: &#123;
      maxInitialRequests: <span class="number">10</span>,
      cacheGroups: &#123;
        vendor: &#123;
          priority: <span class="number">1</span>,
          name: <span class="string">"vendor"</span>,
          test: <span class="regexp">/node_modules/</span>,
          chunks: <span class="string">"initial"</span>,
          minSize: <span class="number">0</span>,
          minChunks: <span class="number">1</span>,
        &#125;,
        moment: &#123;
          name: <span class="string">"moment"</span>,
          priority: <span class="number">5</span>,
          test: <span class="regexp">/[\/]node_modules[\/]moment[\/]/</span>,
          chunks: <span class="string">"initial"</span>,
          minSize: <span class="number">100</span>,
          minChunks: <span class="number">1</span>,
        &#125;,
        lodash: &#123;
          name: <span class="string">"lodash"</span>,
          priority: <span class="number">6</span>,
          test: <span class="regexp">/[\/]node_modules[\/]lodash[\/]/</span>,
          chunks: <span class="string">"initial"</span>,
          minSize: <span class="number">100</span>,
          minChunks: <span class="number">1</span>,
        &#125;,
        antd: &#123;
          name: <span class="string">"antd"</span>,
          priority: <span class="number">7</span>,
          test: <span class="regexp">/[\/]node_modules[\/]antd[\/]es[\/]/</span>,
          chunks: <span class="string">"initial"</span>,
          minSize: <span class="number">100</span>,
          minChunks: <span class="number">1</span>,
        &#125;,
      &#125;,
    &#125;,
    minimizer: [
      <span class="keyword">new</span> opimizeCss(),
      <span class="keyword">new</span> TerserPlugin(&#123;
        cache: <span class="literal">true</span>,
        parallel: <span class="literal">true</span>,
        sourceMap: <span class="literal">true</span>,
      &#125;),
    ],
  &#125;,
  plugins: [<span class="keyword">new</span> BundleAnalyzerPlugin()],
&#125;);</code></pre>
<h4 id="react-lazy">React.lazy</h4>
<p>理论上你可以对你的任何代码使用懒加载, 但我觉得仅对页面级别使用懒加载足以, 通过路由懒加载界面:</p>
<pre><code class="highlight js"><span class="comment">//</span>
<span class="comment">// 路由列表</span>
<span class="keyword">export</span> <span class="keyword">const</span> routesMapping = &#123;
  <span class="comment">//</span>
  <span class="comment">// 首页</span>
  <span class="string">"/"</span>: React.lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">"@/pages/welcome"</span>)),
  <span class="string">"/welcome"</span>: React.lazy(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">"@/pages/welcome"</span>)),
&#125;;</code></pre>
<pre><code class="highlight js">...
&#123;
  map(routesMapping, (Component, key) =&gt; &#123;
    <span class="keyword">return</span> (
      <span class="keyword">get</span>(permissionsMapping, key) &amp;&amp; (
        &lt;Route
          exact
          path=&#123;key&#125;
        &gt;
         &lt;Component
            &#123;...this.props&#125;
        /&gt;
        &lt;<span class="regexp">/Route&gt;</span>
<span class="regexp">      )</span>
<span class="regexp">    );</span>
<span class="regexp">  &#125;);</span>
<span class="regexp">&#125;</span>
<span class="regexp">...</span></code></pre>
<p>至此, 生产环境下打包后, 你的 js 文件将会分散为多个。</p>
<h3 id="客户端缓存-cache-control">客户端缓存( Cache-Control )</h3>
<p>经过以上的各种优化, 界面的访问速度已经很快了, 还有一个针对本地缓存的方案, 这个与开启 GZip 压缩类似, 以 nodejs 为例:</p>
<pre><code class="highlight js">...
server.use(<span class="keyword">async</span> (ctx, next) =&gt; &#123;
  <span class="keyword">if</span> (ctx.request.path.indexOf(<span class="string">'/api'</span>) === <span class="number">-1</span>) &#123;
    ctx.set(<span class="string">'Cache-Control'</span>, <span class="string">'public'</span>);
  &#125; <span class="keyword">else</span> &#123;
    ctx.set(<span class="string">'Cache-Control'</span>, <span class="string">'no-store, no-cache, must-revalidate'</span>);
  &#125;
  ctx.set(<span class="string">'max-age'</span>, <span class="number">7200</span>);
  <span class="keyword">await</span> next();
&#125;);
...</code></pre>
<p>对除了 api 请求以外的请求进行缓存, 除了第一次访问需要网络请求资源以外, 下一次刷新将直接从本地缓存获取资源。</p>
<h2 id="总结">总结</h2>
<p>优化 web 体验, 基本上是围绕 <code>减少资源大小( 压缩, 拆分 )</code>, <code>减少HTTP请求( svg , 样式优化 )</code>, <code>避免重绘和重排( 优化代码 )</code>, <code>提高 HTTP 访问速度( CDN )</code>, 如果大家有更好的优化方式, 欢迎一起讨论。</p>

                
                <hr>
                <div class="row">
                    <div class="col-md-12 post-statement">
                        <span>作者: Kavience</span>
                        <span>本文链接: <a href="http://www.kavience.com/frontend/summary-of-web-frontend-optimization.html">http://www.kavience.com/frontend/summary-of-web-frontend-optimization.html </a></span>
                        <span>转载请注明:《Web前端优化总结》转自 http://www.kavience.com/frontend/summary-of-web-frontend-optimization.html，原作者：Kavience </span>
                        <span><a href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="noopener">版权声明: 自由转载-非商用-非衍生-保持署名（创意共享3.0许可证）</a></span>
                    </div>
                    <div class="col-md-12">
                        <!-- Categories Start -->
                        <section>
                            <h5><a href="/categories/">分类 </a></h5>
                            <div class="tags">
                                
                                    <a class="tag" href="/categories/frontend" title="frontend">frontend</a>
                                
                            </div>
                        </section>
                        <!-- Categories End -->
                    </div>
                    <div class="col-md-12">
                        <!-- Tags Start -->
                        <section class="past-tags">
                            <h5><a href="/tags/">标签 </a></h5>
                            <div class="tags">
                                
                                    <a class="tag" href="/tags/JavaScript" title="JavaScript">JavaScript</a>
                                
                                    <a class="tag" href="/tags/优化" title="优化">优化</a>
                                
                            </div>
                        </section>
                        <!-- Tags End -->
                    </div>
                </div>

                <hr>
                <!-- Pager Start -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/think/fragility-of-life.html" data-toggle="tooltip" data-placement="top" title="生命的脆弱">&larr; 上一篇 </a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/think/if-you-stick-to-an-industry-for-five-years.html" data-toggle="tooltip" data-placement="top" title="如果坚持一个行业五年">下一篇  &rarr;</a>
                        </li>
                    
                </ul>
                <!-- Pager End -->
               
                <!-- Comment Start -->
<div class="comment">
  
      <div id="Web前端优化总结" class="gitalk"></div>
  
  

  
      <script>
          new Gitalk({
            clientID: `d25cda615a572205be1e`,
            clientSecret: `faa4cf10f1daea3d4701f8be90d80feb88c818ac`,
            repo: `blog`,
            owner: `kavience`,
            admin: `kavience`,
            id: 'Web前端优化总结',
            title: 'Web前端优化总结',
            distractionFreeMode: `false`,
            language: `zh-CN`
          }).render('Web前端优化总结');
      </script>
  

  
</div>            
<!-- Comment End -->
                
                <br>
                <!-- Comment Start -->
<div class="comment">
  
      <div id="Web前端优化总结" class="gitalk"></div>
  
  

  
      <script>
          new Gitalk({
            clientID: `d25cda615a572205be1e`,
            clientSecret: `faa4cf10f1daea3d4701f8be90d80feb88c818ac`,
            repo: `blog`,
            owner: `kavience`,
            admin: `kavience`,
            id: 'Web前端优化总结',
            title: 'Web前端优化总结',
            distractionFreeMode: `false`,
            language: `zh-CN`
          }).render('Web前端优化总结');
      </script>
  

  
</div>            
<!-- Comment End -->
            </div>
            
            <!-- Tabe of Content -->
            
	
		<aside id="sidebar">
			<div id="toc" class="toc-article">
				<strong class="toc-title">
					目录
				</strong>
				
					<ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#what"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">What</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#why"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">Why</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#how"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">How</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#cdn-资源引入"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">CDN 资源引入</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#图片-icon-等使用-svg"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">图片、icon 等使用 SVG</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#样式优化-style-loader-mini-css"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">样式优化( style-loader, mini css )</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#代码优化-减少-re-render-次数"><span class="toc-nav-number">3.4.</span> <span class="toc-nav-text">代码优化(减少 re-render 次数)</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#文件开启-gzip-压缩-nodejs-nginx-等"><span class="toc-nav-number">3.5.</span> <span class="toc-nav-text">文件开启 GZip 压缩( Nodejs, Nginx 等 )</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#代码拆分-webpack-dllplugin-webpack-splitchunks-react-lazy"><span class="toc-nav-number">3.6.</span> <span class="toc-nav-text">代码拆分( webpack DllPlugin, webpack splitChunks, React.lazy )</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#webpack-dllplugin"><span class="toc-nav-number">3.6.1.</span> <span class="toc-nav-text">webpack DllPlugin</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#webpack-splitchunks"><span class="toc-nav-number">3.6.2.</span> <span class="toc-nav-text">webpack splitChunks</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#react-lazy"><span class="toc-nav-number">3.6.3.</span> <span class="toc-nav-text">React.lazy</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#客户端缓存-cache-control"><span class="toc-nav-number">3.7.</span> <span class="toc-nav-text">客户端缓存( Cache-Control )</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#总结"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">总结</span></a></li></ol>
				
			</div>
		</aside>
	


<script>
let toc = document.getElementById('toc')
if (toc != null) {
    window.addEventListener("scroll", scrollcatelogHandler);
    let tocPosition = toc.offsetTop;
    function scrollcatelogHandler(e) {
        let event = e || window.event,
            target = event.target || event.srcElement;
        let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        if (scrollTop > tocPosition - 60) {
            toc.classList.add("toc-fixed");
        } else {
            toc.classList.remove("toc-fixed");
        }
    }
}
</script>
        </div>
    </div>
</article>

    </div>
    <!-- Main Content End -->

    <span id="rocket"></span>

    <!-- Google Analytics -->
    
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-171834825-2" ></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());
            gtag("config", "UA-171834825-2");
        </script>
    

    <!-- Baidu Tongji -->
    

    <script>
        // TOC scroll
        $(".toc-nav-link").bind("click touch", function () {
            // 根据a标签的href转换为id选择器，获取id元素所处的位置
            $('html,body').animate({ scrollTop: ($($(this).attr('href')).offset().top) }, 300);
        });
    </script>
</body>
</html>
