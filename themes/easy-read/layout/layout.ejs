<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<%- partial('_partial/head') %>

<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<%- partial('_partial/header',{cache: true}) %>
	
    <%- partial('_partial/nav',{cache: true}) %>

    <!-- Main Content -->
    <div class="main-content">
        <%- body %>
    </div>

	<a id="rocket" href="#top" class=""></a>
    <!-- Bootstrap Core JavaScript -->
    <%- js('js/bootstrap.min.js') %>

    <!-- Custom Theme JavaScript -->
    <%- js('js/hux-blog.min.js') %>

    <!-- async load function -->
    <script>
    function async(u, c) {
        var d = document,
        t = "script",
        o = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) {
        o.addEventListener(
            "load",
            function (e) {
            c(null, e);
            },
            false
        );
        }
        s.parentNode.insertBefore(o, s);
    }
    </script>

    <!-- jquery.tagcloud.js -->
    <script>
    // only load tagcloud.js in tag.html
    if ($("#tag_cloud").length !== 0) {
        async(
        "<%= config.url%><%= config.root%>js/jquery.tagcloud.js",
        function () {
            $.fn.tagcloud.defaults = {
            //size: {start: 1, end: 1, unit: 'em'},
            color: { start: "#bbbbee", end: "#0085a1" },
            };
            $("#tag_cloud a").tagcloud();
        }
        );
    }
    </script>

    <!--fastClick.js -->
    <script>
    async(
        "https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js",
        function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
        }
    );
    </script>

    <!-- Google Analytics -->

    <% if (config.ga_track_id) { %>
    <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=<%= config.ga_track_id %>"
    ></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "<%= config.ga_track_id %>");
    </script>

    <% } %>

    <!-- Baidu Tongji -->
    <% if (config.ba_track_id) { %>
    <script>
    // dynamic User by Hux
    var _baId = "<%= config.ba_track_id %>";

    // Originial
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?" + _baId;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <% } %>

    <script>
    $(".toc-nav-link").bind("click touch", function () {
        //根据a标签的href转换为id选择器，获取id元素所处的位置
        $('html,body').animate({ scrollTop: ($($(this).attr('href')).offset().top) }, 300);
    });
    </script>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
</body>

</html>
